process TEST = {

  source = PoolSource { untracked vstring fileNames = {'file:digis.root'} }

  include "RecoPixelVertexing/PixelTrackFitting/data/PixelTracks.cff"
  module test = PixelTrackTest { string TrackCollection = "pixelTracks" }

  include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
  include "CalibTracker/SiStripLorentzAngle/data/SiStripLAFakeESSource.cfi"
  include "RecoTracker/TkSeedingLayers/data/MixedLayerTriplets.cfi"
  include "RecoTracker/TkSeedingLayers/data/TTRHBuilderWithoutAngle4MixedTriplets.cfi"
  include "RecoPixelVertexing/PixelTrackFitting/data/PixelFitterByConformalMappingAndLine.cfi"
  module pixelTracks2 = pixelTracks from "RecoPixelVertexing/PixelTrackFitting/data/PixelTracks.cfi"
  replace pixelTracks2.OrderedHitsFactoryPSet.SeedingLayers = "MixedLayerTriplets"
  replace pixelTracks2.FitterPSet = { using PixelFitterByConformalMappingAndLine }
  module test2 = PixelTrackTest { string TrackCollection = "pixelTracks2" }

  module out = PoolOutputModule
  {
    untracked string fileName = "pixel_tracks.root"
    untracked vstring outputCommands = {
      "drop *", "keep *_test_*_*"
    }
  }

  service = MessageLogger { untracked vstring destinations = {"cout"} }

   path p = { pixelTracks, pixelTracks2, test, test2}
   endpath e = {out}
}
